(()=>{if(!document.getElementById("cameraSource")){var e=document.createElement("iframe");e.style.display="none",e.src=chrome.runtime.getURL("./cameraSources.html"),e.id="cameraSource",e.allow="camera",document.body.appendChild(e)}if(!document.getElementById("audioSources")){var t=document.createElement("iframe");t.style.display="none",t.src=chrome.runtime.getURL("./audioSources.html"),t.id="audioSources",t.allow="microphone",document.body.appendChild(t)}var n="",r=[];function o(e){e.preventDefault()}function i(){chrome.runtime.sendMessage({type:"SCREEN_SHARE"})}function a(e){let t=document.querySelector("#"+e);t&&t.remove()}function c(e){var t=e.target.value;n=r.filter((e=>e.deviceId==t))[0]}function d(){var e={type:"START_CAMERA",data:{deviceLabel:n.label,deviceId:n.deviceId}};chrome.runtime.sendMessage(e),s()}function s(e){a("cameraRecIcon");let t=document.querySelector(".nav-item"),n=(document.querySelector(".title"),document.querySelector(".timer-icon")),r="";var o=document.createElement("div");o.setAttribute("id","cameraRecIcon"),t?(o.style.cssText="background: #fff;padding: 0 5px;float: left;margin-right: 10px;position: relative;top: 5px;",r=t):n&&(o.style.cssText="background: #fff;padding: 0 5px;float: right;",r=n);var i=document.createElement("img");i.src=chrome.runtime.getURL("assets/hardware/recording.gif"),i.style.cssText="margin-top: 0;line-height: 20px;width:40px;height:auto",o.appendChild(i),r.insertBefore(o,r.firstChild)}window.addEventListener("keydown",(function(e){if(e.altKey&&"q"==e.key){let e={type:"EXIT_FULLSCREEN"};chrome.runtime.sendMessage(e,(e=>{chrome.runtime.lastError||console.log(e)}))}})),document.onkeydown=function(e){if(123==window.event.keyCode||2==e.button)return!1},chrome.runtime.onMessage.addListener((function(e,t,n){if(!chrome.runtime.lastError)return e.type&&"SHOW_SCREENSHARE_PROMPT"==e.type?(function(){a("hardwareAccessPrompt");var e=document.createElement("div");e.setAttribute("id","hardwareAccessPrompt"),e.style.cssText="position: absolute;z-index: 99999;width: 100%;height: 100%;display: flex;align-items: center;justify-content: center;text-align: center;top:0;";var t=document.createElement("div");t.style.cssText="position: absolute;width: 100%;height: 100%;background-color: black;opacity: 0.3;";var n=document.createElement("div");n.style.cssText="position: absolute;width: 400px;height: auto;background-color: white;opacity: 1;padding: 30px;border-radius: 5px;";var r=document.createElement("p");r.innerText="Screen share has been stopped. Click allow screen share button to share your screen.",r.style.cssText="margin-top: 0;line-height: 20px;";var o=document.createElement("button");o.innerText="Allow Screen Share",o.setAttribute("id","screenShareBtn"),o.style.cssText="height: 35px;width: 200px;border: 0;background-color: green;color: white;cursor: pointer;",e.appendChild(t),e.appendChild(n),n.appendChild(r),n.appendChild(o),document.body.appendChild(e),document.getElementById("screenShareBtn").addEventListener("click",i)}(),n(!0)):e.type&&"REMOVE_BLOCKER"==e.type?(a(e.id),n(!0)):e.type&&"CAMERA_INTERRUPTED"==e.type?(function(e){a("cameraAccessPrompt");var t=document.createElement("div");t.setAttribute("id","cameraAccessPrompt"),t.style.cssText="position: absolute;z-index: 99999;width: 100%;height: 100%;display: flex;align-items: center;justify-content: center;text-align: center;top:0;";var n=document.createElement("div");n.style.cssText="position: absolute;width: 100%;height: 100%;background-color: black;opacity: 0.3;";var o=document.createElement("div");o.style.cssText="position: absolute;width: 400px;height: auto;background-color: white;opacity: 1;padding: 30px;border-radius: 5px;";var i=document.createElement("p");i.innerText="Camera has been stopped. Select the dropdown option and select the Allow Camera button.",r=e.devices;var s='<br/><div style="display: flex;padding: 0px;margin: 0px;position: relative;top: 7px;padding-top: 5px;"><span >select Camera : </span><select  id="cameraDrop"><option value=-1>select Camera</option>';r.forEach((function(e){"videoinput"==e.kind&&(s+="<option value="+e.deviceId+">"+e.label+"</option>")})),s+="</select></div>",i.innerHTML+=s,i.style.cssText="margin-top: 0;line-height: 20px;";var l=document.createElement("button");l.innerText="Allow Camera",l.setAttribute("id","cameraBtn"),l.style.cssText="height: 35px;width: 200px;border: 0;background-color: green;color: white;cursor: pointer;",t.appendChild(n),t.appendChild(o),o.appendChild(i),o.appendChild(l),document.body.appendChild(t),document.getElementById("cameraBtn").addEventListener("click",d),document.getElementById("cameraDrop").addEventListener("change",c)}(e),a("cameraRecIcon"),n(!0)):e.type&&"DisableRightClick"===e.type?(e.data,window.removeEventListener("contextmenu",o),e.data||window.addEventListener("contextmenu",o),n(!0)):e.type&&"ALLOW_CAMERA_REC_ACCESS"==e.type&&(s(),n(!0)),!0}))})();